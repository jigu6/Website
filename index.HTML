<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MANGAAO â€“ Offline Store</title>

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#1a237e;color:#fff;padding:15px;text-align:center;font-size:20px}
.page{display:none;padding:15px}
.active{display:block}

.card{background:#fff;padding:12px;border-radius:12px;margin-bottom:12px;
display:flex;justify-content:space-between;align-items:center;
box-shadow:0 2px 6px rgba(0,0,0,.1)}

.qtyBox{display:flex;align-items:center;gap:6px}
.qtyNum{background:#1a237e;color:#fff;padding:4px 10px;border-radius:20px}

.btn{background:#1a237e;color:#fff;border:none;padding:8px 14px;border-radius:8px}
input,select,textarea{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc}

.nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;border-top:1px solid #ccc}
.nav button{flex:1;padding:10px;border:none;background:#fff;font-size:16px}

.order{background:#fff;padding:10px;border-radius:8px;margin-bottom:10px}
.success{font-size:22px;color:green}
.total{font-weight:bold}
</style>
</head>

<body>

<header>MANGAAO ğŸ›’</header>

<!-- LOGIN -->
<div class="page active" id="login">
<h3>User Login</h3>
<input id="mobile" placeholder="Enter Mobile Number">
<button class="btn" onclick="sendOtp()">Send OTP</button>
</div>

<!-- OTP -->
<div class="page" id="otp">
<h3>Verify OTP</h3>
<input placeholder="Enter OTP">
<p>Demo OTP: <b>1234</b></p>
<button class="btn" onclick="show('home')">Verify</button>
</div>

<!-- HOME -->
<div class="page" id="home">
<h3>Products</h3>
<div id="products"></div>
</div>

<!-- CART -->
<div class="page" id="cart">
<h3>Your Cart</h3>

<input id="coupon" placeholder="Coupon Code (SAVE50)">
<button class="btn" onclick="applyCoupon()">Apply</button>

<p>Items Total: â‚¹<span id="items">0</span></p>
<p>Delivery Fee: â‚¹12</p>
<p>Discount: â‚¹<span id="discount">0</span></p>
<p class="total">Total: â‚¹<span id="total">12</span></p>

<button class="btn" onclick="show('address')">Continue</button>
</div>

<!-- ADDRESS -->
<div class="page" id="address">
<h3>Delivery Address</h3>
<input id="name" placeholder="Full Name">
<input id="phone" placeholder="Mobile Number">
<textarea id="addr" placeholder="Full Address"></textarea>
<button class="btn" onclick="saveAddress()">Save & Continue</button>
</div>

<!-- PAYMENT -->
<div class="page" id="payment">
<h3>Payment</h3>

<select id="method" onchange="checkOtp()">
<option>Cash on Delivery</option>
<option>UPI ID</option>
<option>Card</option>
</select>

<input id="payInput" placeholder="Enter UPI ID / Card Details" oninput="checkOtp()">

<div id="payOtp" style="display:none">
<input placeholder="Enter Payment OTP">
<p>Demo OTP: <b>5678</b></p>
</div>

<button class="btn" onclick="pay()">Pay</button>
</div>

<!-- SUCCESS -->
<div class="page" id="success">
<p class="success">âœ… Order Successful</p>
<button class="btn" onclick="show('home')">Go Home</button>
</div>

<!-- USER ORDERS -->
<div class="page" id="orders">
<h3>Your Orders</h3>
<div id="orderList"></div>
</div>

<!-- ADMIN PANEL -->
<div class="page" id="admin">
<h3>Admin Panel</h3>
<div id="adminOrders"></div>
</div>

<!-- DELIVERY BOY -->
<div class="page" id="delivery">
<h3>Delivery Addresses</h3>
<div id="deliveryList"></div>
</div>

<!-- NAV -->
<div class="nav">
<button onclick="show('home')">ğŸ </button>
<button onclick="show('cart')">ğŸ›’</button>
<button onclick="show('orders')">ğŸ“¦</button>
<button onclick="show('admin')">ğŸ§‘â€ğŸ’¼</button>
<button onclick="show('delivery')">ğŸšš</button>
</div>

<script>
let products=[
["ğŸ Apple",100],["ğŸ¥­ Mango",80],["ğŸ§¼ Soap",30],["ğŸŸ Chips",20],
["ğŸª Biscuit",25],["ğŸ§´ Shampoo",120],["ğŸ¥› Milk",50],
["ğŸ Bread",40],["ğŸš Rice",90],["ğŸ§ƒ Juice",60]
];

let qty={},total=0,discount=0,orders=[],couponUsed=0,address={};

products.forEach(p=>qty[p[0]]=0);

let list=document.getElementById("products");
products.forEach(p=>{
list.innerHTML+=`
<div class="card">
<span>${p[0]} â‚¹${p[1]}</span>
<div class="qtyBox">
<button onclick="change('${p[0]}',${p[1]},-1)">âˆ’</button>
<span class="qtyNum" id="${p[0]}">0</span>
<button onclick="change('${p[0]}',${p[1]},1)">+</button>
</div></div>`;
});

function show(id){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

function sendOtp(){
if(document.getElementById("mobile").value.length<10)
return alert("Enter valid mobile number");
show("otp");
}

function change(id,price,val){
if(qty[id]+val<0) return;
qty[id]+=val;
document.getElementById(id).innerText=qty[id];
total+=price*val;
update();
}

function applyCoupon(){
if(document.getElementById("coupon").value==="SAVE50" && couponUsed<3){
discount=50;
}else{
discount=0;
alert("Coupon expired or invalid");
}
update();
}

function update(){
document.getElementById("items").innerText=total;
document.getElementById("discount").innerText=discount;
document.getElementById("total").innerText=total+12-discount;
}

function saveAddress(){
address={
name:document.getElementById("name").value,
phone:document.getElementById("phone").value,
addr:document.getElementById("addr").value
};
if(!address.name || !address.phone || !address.addr)
return alert("Fill full address");
show("payment");
}

function checkOtp(){
let m=document.getElementById("method").value;
let v=document.getElementById("payInput").value;
document.getElementById("payOtp").style.display=
(m!=="Cash on Delivery" && v.length>3)?"block":"none";
}

function pay(){
let orderProducts=[];
for(let p in qty){
if(qty[p]>0) orderProducts.push(`${p} x ${qty[p]}`);
}

let order={
date:new Date().toLocaleString(),
items:orderProducts,
amount:total+12-discount,
address:address
};

orders.push(order);
if(discount===50) couponUsed++;

document.getElementById("orderList").innerHTML=
orders.map(o=>`<div class="order">
ğŸ“… ${o.date}<br>
ğŸ› ${o.items.join(", ")}<br>
ğŸ  ${o.address.name}, ${o.address.phone}<br>
${o.address.addr}<br>
ğŸ’° â‚¹${o.amount}
</div>`).join("");

document.getElementById("adminOrders").innerHTML=
orders.map(o=>`<div class="order">
<b>Date:</b> ${o.date}<br>
<b>Products:</b><br>${o.items.join("<br>")}<br>
<b>Address:</b><br>
${o.address.name}<br>${o.address.phone}<br>${o.address.addr}<br>
<b>Total:</b> â‚¹${o.amount}
</div>`).join("");

document.getElementById("deliveryList").innerHTML=
orders.map(o=>`<div class="order">
ğŸ“ ${o.address.name}<br>
ğŸ“ ${o.address.phone}<br>
ğŸ  ${o.address.addr}
</div>`).join("");

total=0;discount=0;
Object.keys(qty).forEach(k=>{qty[k]=0;document.getElementById(k).innerText=0});
show("success");
}
</script>

</body>
</html>